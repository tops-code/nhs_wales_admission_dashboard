geom_text(aes(label=value, color=name), size = 3, nudge_x= ifelse(long_main$value==wide$max, .6, -.6),
vjust = ifelse(long_main$value==wide$max, -0.9, 2)) +
theme_custom() +
theme(legend.position = "none",
axis.text.y = element_text(color="black", margin = margin(r = 15)),
axis.text.x = element_text(color="#989898"),
axis.title = element_blank()
) +
scale_color_manual(values=c("#436685", "#BF2F24")) +
scale_y_discrete(limits = rev(levels(long$metric)), labels = c('fec_100' = "Finished Consultant Episodes per 10000",
"admi_100" = "Admissions per 10000",
"emergency_100" = "Emergency per 10000",
"male_100" = "Male Admissions per 10000",
"female_100" = "Female Admissions per 10000"
)) +
coord_cartesian(ylim=c(1, 7.5))
p_gap<-wide|>ggplot(aes(x = dif, y=metric)) +
geom_text(aes(x=0, label = dif),fontface="bold",size=3.25) +
theme_void() +
coord_cartesian(xlim = c(-.05, 0.05),
ylim=c(1,7.5) # needs to match main plot
)+
theme(
plot.margin = margin(l=0, r=0, b=0, t=0), #otherwise it adds too much space
panel.background = element_rect(fill="#EFEFE3", color="#EFEFE3"),
legend.position = "none"
)+
scale_color_manual(values=c("#436685", "#BF2F24"))
p_whole=
# syntax from `patchwork`
p_main + p_gap + plot_layout(design=
c(
area(l=0,  r=45, t=0, b=1), # defines the main figure area
area(l=46, r=52, t=0, b=1)  # defines the gap figure area
))
p_whole
p_main<-long_main|>
ggplot(aes(x=value,y=metric)) +
geom_line(aes(group=metric), color="#E7E7E7", linewidth=3.5) +
# note that linewidth is a little larger than the point size
# so that the line matches the height of the point. why is it
# like that? i don't really know
geom_point(aes(color=name), size=3) +
geom_text(aes(label=value, color=name), size = 3, nudge_x= ifelse(long_main$value==wide$max, .6, -.6),
vjust = ifelse(long_main$value==wide$max, -0.9, 2)) +
theme_custom() +
theme(legend.position = "none",
axis.text.y = element_text(color="black", margin = margin(r = 15)),
axis.text.x = element_text(color="#989898"),
axis.title = element_blank()
) +
scale_color_manual(values=c("#436685", "#BF2F24")) +
scale_y_discrete(limits = rev(levels(long$metric)), labels = c('fec_100' = "Finished Consultant Episodes per 10000",
"admi_100" = "Admissions per 10000",
"emergency_100" = "Emergency per 10000",
"male_100" = "Male Admissions per 10000",
"female_100" = "Female Admissions per 10000"
)) +
coord_cartesian(ylim=c(1, 10))
p_gap<-wide|>ggplot(aes(x = dif, y=metric)) +
geom_text(aes(x=0, label = dif),fontface="bold",size=3.25) +
theme_void() +
coord_cartesian(xlim = c(-.05, 0.05),
ylim=c(1,10) # needs to match main plot
)+
theme(
plot.margin = margin(l=0, r=0, b=0, t=0), #otherwise it adds too much space
panel.background = element_rect(fill="#EFEFE3", color="#EFEFE3"),
legend.position = "none"
)+
scale_color_manual(values=c("#436685", "#BF2F24"))
p_whole=
# syntax from `patchwork`
p_main + p_gap + plot_layout(design=
c(
area(l=0,  r=45, t=0, b=1), # defines the main figure area
area(l=46, r=52, t=0, b=1)  # defines the gap figure area
))
p_whole
long_main|>
ggplot(aes(x=value,y=metric)) +
geom_line(aes(group=metric), color="#E7E7E7", linewidth=3.5) +
# note that linewidth is a little larger than the point size
# so that the line matches the height of the point. why is it
# like that? i don't really know
geom_point(aes(color=name), size=3) +
geom_text(aes(label=value, color=name), size = 3, nudge_x= ifelse(long_main$value==wide$max, .6, -.6),
vjust = ifelse(long_main$value==wide$max, -0.9, 2),
hjust = ifelse(long_main$value==wide$max, -0.9, 2) )+
theme_custom() +
theme(legend.position = "none",
axis.text.y = element_text(color="black", margin = margin(r = 15)),
axis.text.x = element_text(color="#989898"),
axis.title = element_blank()
) +
scale_color_manual(values=c("#436685", "#BF2F24")) +
scale_y_discrete(limits = rev(levels(long$metric)), labels = c('fec_100' = "Finished Consultant Episodes per 10000",
"admi_100" = "Admissions per 10000",
"emergency_100" = "Emergency per 10000",
"male_100" = "Male Admissions per 10000",
"female_100" = "Female Admissions per 10000"
)) +
coord_cartesian(ylim=c(1, 10))
long_main|>
ggplot(aes(x=value,y=metric)) +
geom_line(aes(group=metric), color="#E7E7E7", linewidth=3.5) +
# note that linewidth is a little larger than the point size
# so that the line matches the height of the point. why is it
# like that? i don't really know
geom_point(aes(color=name), size=3) +
geom_text(aes(label=value, color=name), size = 3, nudge_x= ifelse(long_main$value==wide$max, .6, -.6),
vjust = ifelse(long_main$value==wide$max, -0.9, 2)) +
theme_custom() +
theme(legend.position = "none",
axis.text.y = element_text(color="black", margin = margin(r = 15)),
axis.text.x = element_text(color="#989898"),
axis.title = element_blank()
) +
scale_color_manual(values=c("#436685", "#BF2F24")) +
scale_y_discrete(limits = rev(levels(long$metric)), labels = c('fec_100' = "Finished Consultant Episodes per 10000",
"admi_100" = "Admissions per 10000",
"emergency_100" = "Emergency per 10000",
"male_100" = "Male Admissions per 10000",
"female_100" = "Female Admissions per 10000"
)) +
coord_cartesian(ylim=c(1, 10))
long_main|>
ggplot(aes(x=value,y=metric)) +
geom_line(aes(group=metric), color="#E7E7E7", linewidth=3.5) +
# note that linewidth is a little larger than the point size
# so that the line matches the height of the point. why is it
# like that? i don't really know
geom_point(aes(color=name), size=3) +
geom_text(aes(label=value, color=name), size = 3, nudge_x= ifelse(long_main$value==wide$max, .6, -.6),
vjust = ifelse(long_main$value==wide$max, -0.9, 5)) +
theme_custom() +
theme(legend.position = "none",
axis.text.y = element_text(color="black", margin = margin(r = 15)),
axis.text.x = element_text(color="#989898"),
axis.title = element_blank()
) +
scale_color_manual(values=c("#436685", "#BF2F24")) +
scale_y_discrete(limits = rev(levels(long$metric)), labels = c('fec_100' = "Finished Consultant Episodes per 10000",
"admi_100" = "Admissions per 10000",
"emergency_100" = "Emergency per 10000",
"male_100" = "Male Admissions per 10000",
"female_100" = "Female Admissions per 10000"
)) +
coord_cartesian(ylim=c(1, 10))
long_main|>
ggplot(aes(x=value,y=metric)) +
geom_line(aes(group=metric), color="#E7E7E7", linewidth=3.5) +
# note that linewidth is a little larger than the point size
# so that the line matches the height of the point. why is it
# like that? i don't really know
geom_point(aes(color=name), size=3) +
geom_text(aes(label=value, color=name), size = 3, nudge_x= ifelse(long_main$value==wide$max, .6, -.6),
vjust = ifelse(long_main$value==long_main$max, -0.9, 2))+
theme_custom() +
theme(legend.position = "none",
axis.text.y = element_text(color="black", margin = margin(r = 15)),
axis.text.x = element_text(color="#989898"),
axis.title = element_blank()
) +
scale_color_manual(values=c("#436685", "#BF2F24")) +
scale_y_discrete(limits = rev(levels(long$metric)), labels = c('fec_100' = "Finished Consultant Episodes per 10000",
"admi_100" = "Admissions per 10000",
"emergency_100" = "Emergency per 10000",
"male_100" = "Male Admissions per 10000",
"female_100" = "Female Admissions per 10000"
)) +
coord_cartesian(ylim=c(1, 10))
wide|>ggplot(aes(x = dif, y=metric)) +
geom_text(aes(x=0, label = dif),fontface="bold",size=3.25) +
theme_void() +
coord_cartesian(xlim = c(-.05, 0.05),
ylim=c(1,10) # needs to match main plot
)+
theme(
plot.margin = margin(l=0, r=0, b=0, t=0), #otherwise it adds too much space
panel.background = element_rect(fill="#EFEFE3", color="#EFEFE3"),
legend.position = "none"
)+
scale_color_manual(values=c("#436685", "#BF2F24"))
wide|>ggplot(aes(x = dif, y=metric)) +
geom_text(aes(x=0, label = dif),fontface="bold",size=3.25) +
theme_void() +
coord_cartesian(xlim = c(-.05, 0.05),
ylim=c(1,10) # needs to match main plot
)+
theme_custom() +
theme(
plot.margin = margin(l=0, r=0, b=0, t=0), #otherwise it adds too much space
panel.background = element_rect(fill="#EFEFE3", color="#EFEFE3"),
legend.position = "none"
)+
scale_color_manual(values=c("#436685", "#BF2F24"))
wide|>ggplot(aes(x = dif, y=metric)) +
geom_text(aes(x=0, label = dif),fontface="bold",size=3.25) +
theme_custom() +
theme_void() +
coord_cartesian(xlim = c(-.05, 0.05),
ylim=c(1,10) # needs to match main plot
)+
theme(
plot.margin = margin(l=0, r=0, b=0, t=0), #otherwise it adds too much space
panel.background = element_rect(fill="#EFEFE3", color="#EFEFE3"),
legend.position = "none"
)+
scale_color_manual(values=c("#436685", "#BF2F24"))
wide|>ggplot(aes(x = dif, y=metric)) +
geom_text(aes(x=0, label = dif),fontface="bold",size=3.25) +
theme_void() +
coord_cartesian(xlim = c(-.05, 0.05),
ylim=c(1,10) # needs to match main plot
)+
theme(
plot.margin = margin(l=0, r=0, b=0, t=0), #otherwise it adds too much space
panel.background = element_rect(fill="#EFEFE3", color="#EFEFE3"),
legend.position = "none"
)+
scale_color_manual(values=c("#436685", "#BF2F24"))
wide|>ggplot(aes(x = dif, y=metric)) +
geom_text(aes(x=0, label = dif),fontface="bold",size=3.25) +
geom_text(aes(x=0, y=7), # 7 because that's the # of y-axis values
label="Diff",
nudge_y =.5, # match the nudge value of the main plot legend
fontface="bold",
size=3.25) +
theme_void() +
coord_cartesian(xlim = c(-.05, 0.05),
ylim=c(1,10) # needs to match main plot
)+
theme(
plot.margin = margin(l=0, r=0, b=0, t=0), #otherwise it adds too much space
panel.background = element_rect(fill="#EFEFE3", color="#EFEFE3"),
legend.position = "none"
)+
scale_color_manual(values=c("#436685", "#BF2F24"))
wide|>ggplot(aes(x = dif, y=metric)) +
geom_text(aes(x=0, label = dif),fontface="bold",size=3.25) +
geom_text(aes(x=0, y=11), # 7 because that's the # of y-axis values
label="Diff",
nudge_y =.5, # match the nudge value of the main plot legend
fontface="bold",
size=3.25) +
theme_void() +
coord_cartesian(xlim = c(-.05, 0.05),
ylim=c(1,10) # needs to match main plot
)+
theme(
plot.margin = margin(l=0, r=0, b=0, t=0), #otherwise it adds too much space
panel.background = element_rect(fill="#EFEFE3", color="#EFEFE3"),
legend.position = "none"
)+
scale_color_manual(values=c("#436685", "#BF2F24"))
wide|>ggplot(aes(x = dif, y=metric)) +
geom_text(aes(x=0, label = dif),fontface="bold",size=3.25) +
geom_text(aes(x=0, y=10), # 7 because that's the # of y-axis values
label="Diff",
nudge_y =.5, # match the nudge value of the main plot legend
fontface="bold",
size=3.25) +
theme_void() +
coord_cartesian(xlim = c(-.05, 0.05),
ylim=c(1,10) # needs to match main plot
)+
theme(
plot.margin = margin(l=0, r=0, b=0, t=0), #otherwise it adds too much space
panel.background = element_rect(fill="#EFEFE3", color="#EFEFE3"),
legend.position = "none"
)+
scale_color_manual(values=c("#436685", "#BF2F24"))
wide|>ggplot(aes(x = dif, y=metric)) +
geom_text(aes(x=0, label = dif),fontface="bold",size=3.25) +
geom_text(aes(x=0, y=10), # 7 because that's the # of y-axis values
label="Difference",
nudge_y =.5, # match the nudge value of the main plot legend
fontface="bold",
size=2) +
theme_void() +
coord_cartesian(xlim = c(-.05, 0.05),
ylim=c(1,10) # needs to match main plot
)+
theme(
plot.margin = margin(l=0, r=0, b=0, t=0), #otherwise it adds too much space
panel.background = element_rect(fill="#EFEFE3", color="#EFEFE3"),
legend.position = "none"
)+
scale_color_manual(values=c("#436685", "#BF2F24"))
wide|>ggplot(aes(x = dif, y=metric)) +
geom_text(aes(x=0, label = dif),fontface="bold",size=3.25) +
geom_text(aes(x=0, y=10), # 7 because that's the # of y-axis values
label="Diff",
nudge_y =.5, # match the nudge value of the main plot legend
fontface="bold",
size=3.25) +
theme_void() +
coord_cartesian(xlim = c(-.05, 0.05),
ylim=c(1,10) # needs to match main plot
)+
theme(
plot.margin = margin(l=0, r=0, b=0, t=0), #otherwise it adds too much space
panel.background = element_rect(fill="#EFEFE3", color="#EFEFE3"),
legend.position = "none"
)+
scale_color_manual(values=c("#436685", "#BF2F24"))
p_gap<-wide|>ggplot(aes(x = dif, y=metric)) +
geom_text(aes(x=0, label = dif),fontface="bold",size=3.25) +
geom_text(aes(x=0, y=10), # 7 because that's the # of y-axis values
label="Diff",
nudge_y =.5, # match the nudge value of the main plot legend
fontface="bold",
size=3.25) +
theme_void() +
coord_cartesian(xlim = c(-.05, 0.05),
ylim=c(1,10) # needs to match main plot
)+
theme(
plot.margin = margin(l=0, r=0, b=0, t=0), #otherwise it adds too much space
panel.background = element_rect(fill="#EFEFE3", color="#EFEFE3"),
legend.position = "none"
)+
scale_color_manual(values=c("#436685", "#BF2F24"))
p_whole=
# syntax from `patchwork`
p_main + p_gap + plot_layout(design=
c(
area(l=0,  r=45, t=0, b=1), # defines the main figure area
area(l=46, r=52, t=0, b=1)  # defines the gap figure area
))
p_whole
p_main<-long_main|>
ggplot(aes(x=value,y=metric)) +
geom_line(aes(group=metric), color="#E7E7E7", linewidth=3.5) +
# note that linewidth is a little larger than the point size
# so that the line matches the height of the point. why is it
# like that? i don't really know
geom_point(aes(color=name), size=3) +
geom_text(aes(label=value, color=name), size = 3, nudge_x= ifelse(long_main$value==wide$max, .6, -.6),
vjust = ifelse(long_main$value==long_main$max, -0.9, 2))+
theme_custom() +
theme(legend.position = "none",
axis.text.y = element_text(color="black", margin = margin(r = 15)),
axis.text.x = element_text(color="#989898"),
axis.title = element_blank()
) +
scale_color_manual(values=c("#436685", "#BF2F24")) +
scale_y_discrete(limits = rev(levels(long$metric)), labels = c('fec_100' = "Finished Consultant Episodes per 10000",
"admi_100" = "Admissions per 10000",
"emergency_100" = "Emergency per 10000",
"male_100" = "Male Admissions per 10000",
"female_100" = "Female Admissions per 10000"
)) +
coord_cartesian(ylim=c(1, 10))
p_whole=
# syntax from `patchwork`
p_main + p_gap + plot_layout(design=
c(
area(l=0,  r=45, t=0, b=1), # defines the main figure area
area(l=46, r=52, t=0, b=1)  # defines the gap figure area
))
long_main|>
ggplot(aes(x=value,y=metric)) +
geom_line(aes(group=metric), color="#E7E7E7", linewidth=3.5) +
# note that linewidth is a little larger than the point size
# so that the line matches the height of the point. why is it
# like that? i don't really know
geom_point(aes(color=name), size=3) +
geom_text(aes(label=value, color=name), size = 3, nudge_x= ifelse(long_main$value==wide$max, .6, -.6),
vjust = ifelse(long_main$value==long_main$max, -0.9, 2))+
theme_custom() +
theme(legend.position = "none",
axis.text.y = element_text(color="black", margin = margin(r = 15)),
axis.text.x = element_text(color="#989898"),
axis.title = element_blank()
) +
scale_color_manual(values=c("#436685", "#BF2F24")) +
scale_y_discrete(limits = rev(levels(long$metric)), labels = c('fec_100' = "Finished Consultant Episodes per 10000",
"admi_100" = "Admissions per 10000",
"emergency_100" = "Emergency per 10000",
"male_100" = "Male Admissions per 10000",
"female_100" = "Female Admissions per 10000"
)) +
coord_cartesian(ylim=c(1, 10))
p_main<-long_main|>
ggplot(aes(x=value,y=metric)) +
geom_line(aes(group=metric), color="#E7E7E7", linewidth=3.5) +
# note that linewidth is a little larger than the point size
# so that the line matches the height of the point. why is it
# like that? i don't really know
geom_point(aes(color=name), size=3) +
geom_text(aes(label=value, color=name), size = 3, nudge_x= ifelse(long_main$value==wide$max, .6, -.6),
vjust = ifelse(long_main$value==long_main$max, -0.9, 2))+
theme(legend.position = "none",
axis.text.y = element_text(color="black", margin = margin(r = 15)),
axis.text.x = element_text(color="#989898"),
axis.title = element_blank()
) +
scale_color_manual(values=c("#436685", "#BF2F24")) +
scale_y_discrete(limits = rev(levels(long$metric)), labels = c('fec_100' = "Finished Consultant Episodes per 10000",
"admi_100" = "Admissions per 10000",
"emergency_100" = "Emergency per 10000",
"male_100" = "Male Admissions per 10000",
"female_100" = "Female Admissions per 10000"
)) +
coord_cartesian(ylim=c(1, 10))
p_gap<-wide|>ggplot(aes(x = dif, y=metric)) +
geom_text(aes(x=0, label = dif),fontface="bold",size=3.25) +
geom_text(aes(x=0, y=10), # 7 because that's the # of y-axis values
label="Diff",
nudge_y =.5, # match the nudge value of the main plot legend
fontface="bold",
size=3.25) +
theme_void() +
coord_cartesian(xlim = c(-.05, 0.05),
ylim=c(1,10) # needs to match main plot
)+
theme(
plot.margin = margin(l=0, r=0, b=0, t=0), #otherwise it adds too much space
panel.background = element_rect(fill="#EFEFE3", color="#EFEFE3"),
legend.position = "none"
)+
scale_color_manual(values=c("#436685", "#BF2F24"))
p_whole=
# syntax from `patchwork`
p_main + p_gap + plot_layout(design=
c(
area(l=0,  r=45, t=0, b=1), # defines the main figure area
area(l=46, r=52, t=0, b=1)  # defines the gap figure area
))
p_whole
wide|>ggplot(aes(x = dif, y=metric)) +
geom_text(aes(x=0, label = dif),fontface="bold",size=3.25) +
geom_text(aes(x=0, y=10), # 7 because that's the # of y-axis values
label="Diff",
nudge_y =.5, # match the nudge value of the main plot legend
fontface="bold",
size=3.25) +
theme_void() +
coord_cartesian(xlim = c(-.05, 0.05),
ylim=c(1,10) # needs to match main plot
)+
theme(
plot.margin = margin(l=0, r=0, b=0, t=0), #otherwise it adds too much space
panel.background = element_rect(fill="#EFEFE3", color="#EFEFE3"),
legend.position = "none"
)+
scale_color_manual(values=c("#436685", "#BF2F24"))
p_whole
p_main<-long_main|>
ggplot(aes(x=value,y=metric)) +
geom_line(aes(group=metric), color="#E7E7E7", linewidth=3.5) +
# note that linewidth is a little larger than the point size
# so that the line matches the height of the point. why is it
# like that? i don't really know
geom_point(aes(color=name), size=3) +
geom_text(aes(label=value, color=name), size = 3, nudge_x= ifelse(long_main$value==wide$max, .6, -.6),
vjust = ifelse(long_main$value==long_main$max, -0.9, 2))+
theme_custom() +
theme(legend.position = "none",
axis.text.y = element_text(color="black", margin = margin(r = 15)),
axis.text.x = element_text(color="#989898"),
axis.title = element_blank()
) +
scale_color_manual(values=c("#436685", "#BF2F24")) +
scale_y_discrete(limits = rev(levels(long$metric)), labels = c('fec_100' = "Finished Consultant Episodes per 10000",
"admi_100" = "Admissions per 10000",
"emergency_100" = "Emergency per 10000",
"male_100" = "Male Admissions per 10000",
"female_100" = "Female Admissions per 10000"
)) +
coord_cartesian(ylim=c(1, 10))
p_gap<-wide|>ggplot(aes(x = dif, y=metric)) +
geom_text(aes(x=0, label = dif),fontface="bold",size=3.25) +
geom_text(aes(x=0, y=10), # 7 because that's the # of y-axis values
label="Diff",
nudge_y =.5, # match the nudge value of the main plot legend
fontface="bold",
size=3.25) +
theme_void() +
coord_cartesian(xlim = c(-.05, 0.05),
ylim=c(1,10) # needs to match main plot
)+
theme(
plot.margin = margin(l=0, r=0, b=0, t=0), #otherwise it adds too much space
panel.background = element_rect(fill="#EFEFE3", color="#EFEFE3"),
legend.position = "none"
)+
scale_color_manual(values=c("#436685", "#BF2F24"))
p_whole=
# syntax from `patchwork`
p_main + p_gap + plot_layout(design=
c(
area(l=0,  r=45, t=0, b=1), # defines the main figure area
area(l=46, r=52, t=0, b=1)  # defines the gap figure area
))
p_whole
plot.new()
rect(0.2, 0.2, 0.4, 0.4, col = "skyblue", border = "black")
plot.new()
rect(0.1, 0.1, 0.1, 0.1, col = "skyblue", border = "black")
plot.new()
rect(0.1, 0.1, 0.1, 0.1, col = "skyblue", border = "black")
plot.new()
rect(0.2, 0.2, 0.1, 0.1, col = "skyblue", border = "black")
value_2<-combined_100|>
filter(health_board == 'Aneurin Bevan University Health Board' & disease_source == "External" & resident_or_provider == 'Health board Resident')|>
select(-c(disease_source, resident_or_provider, health_board))|>
mutate_all(function(x) as.numeric(as.character(x)))|>
pivot_longer(everything(),names_to = 'metric', values_to = 'value')|>mutate(name = "Right")
View(value_2)
